{"version":3,"sources":["utils/storages.ts","components/App/App.tsx","index.tsx"],"names":["setToLocalStorage","key","data","a","window","localStorage","setItem","getFromLocalStorage","getItem","process","REACT_APP_API_KEY","REACT_APP_APP_NAME","REACT_APP_REDIRECT_URL","REACT_APP_SCOPE","TOKEN_STRORAGE_KEY","App","state","token","boards","this","setState","location","hash","split","requestUrl","isLoggedIn","href","newToken","getTokenFromUrl","setToken","renderHeader","renderContent","React","ReactDOM","document","querySelector"],"mappings":"6KAAaA,EAAiB,uCAAG,WAAOC,EAAaC,GAApB,SAAAC,EAAA,sDAC7BC,OAAOC,aAAaC,QAAQL,EAAKC,GADJ,2CAAH,wDAIfK,EAAmB,uCAAG,WAAON,GAAP,SAAAE,EAAA,sDACjCC,OAAOC,aAAaG,QAAQP,GADK,2CAAH,sD,OCDlC,EAKIQ,2TAJFC,EADF,EACEA,kBACAC,EAFF,EAEEA,mBACAC,EAHF,EAGEA,uBACAC,EAJF,EAIEA,gBAEIC,EAAqB,QAcdC,EAAb,4MACSC,MAAQ,CACbC,MAAO,GACPC,OAAQ,IAHZ,qFAME,WAAuBD,GAAvB,wEACEE,KAAKC,SAAS,CAAEH,UADlB,SAEQjB,EAAkBc,EAAoBG,GAF9C,gDANF,oHAWE,oGACsBV,EAAoBO,GAD1C,cACQG,EADR,yBAESA,GAFT,2CAXF,mFAgBE,WACE,OAAOb,OAAOiB,SAASC,KAAKC,MAAM,KAAK,KAjB3C,wBAoBE,WACE,QAASJ,KAAKH,MAAMC,QArBxB,0BAwBE,WACE,IAAMO,EAAU,oDAAgDZ,EAAhD,iCAA+FD,EAA/F,kBAA2HE,EAA3H,oCAAsKH,GAEtL,OACE,iCACGS,KAAKM,aACJ,aAEA,mBAAGC,KAAMF,EAAT,2CAhCV,2BAsCE,WACE,OACE,+BAAOL,KAAKM,aAAe,4CAAsB,sBAxCvD,+BA4CE,WACE,IAAME,EAAWR,KAAKS,kBACtBT,KAAKU,SAASF,KA9ClB,oBAiDE,WACE,OACE,gCACGR,KAAKW,eACLX,KAAKY,gBACN,mBACEL,KAAI,yEAAoEhB,EAApE,kBAA+FS,KAAKH,MAAMC,OADhH,+BAtDR,GAAyBe,aCnBzBC,SAAgB,cAAC,EAAD,IAASC,SAASC,cAAc,Y","file":"static/js/main.9932a5c2.chunk.js","sourcesContent":["export const setToLocalStorage = async (key: string, data: any) => {\r\n    window.localStorage.setItem(key, data);\r\n  };\r\n  \r\n  export const getFromLocalStorage = async (key: string) => {\r\n    window.localStorage.getItem(key);\r\n  };\r\n  ","import * as React from \"react\";\r\nimport { setToLocalStorage, getFromLocalStorage } from \"../../utils\";\r\n\r\nconst {\r\n  REACT_APP_API_KEY,\r\n  REACT_APP_APP_NAME,\r\n  REACT_APP_REDIRECT_URL,\r\n  REACT_APP_SCOPE,\r\n} = process.env;\r\nconst TOKEN_STRORAGE_KEY = \"TOKEN\";\r\n\r\ninterface Board {\r\n  id: string;\r\n  name: string;\r\n  pinned: boolean;\r\n  desc?: string;\r\n}\r\n\r\ninterface AppState {\r\n  token: string;\r\n  boards: Array<Board>;\r\n}\r\n\r\nexport class App extends React.Component<any, AppState> {\r\n  public state = {\r\n    token: \"\",\r\n    boards: [],\r\n  };\r\n\r\n  private async setToken(token: string) {\r\n    this.setState({ token });\r\n    await setToLocalStorage(TOKEN_STRORAGE_KEY, token);\r\n  }\r\n\r\n  private async getToken() {\r\n    const token = await getFromLocalStorage(TOKEN_STRORAGE_KEY);\r\n    return token;\r\n  }\r\n\r\n  private getTokenFromUrl() {\r\n    return window.location.hash.split(\"=\")[1];\r\n  }\r\n\r\n  private isLoggedIn() {\r\n    return !!this.state.token;\r\n  }\r\n\r\n  private renderHeader() {\r\n    const requestUrl = `https://trello.com/1/authorize?return_url=${REACT_APP_REDIRECT_URL}&expiration=1day&name=${REACT_APP_APP_NAME}&scope=${REACT_APP_SCOPE}&response_type=token&key=${REACT_APP_API_KEY}`;\r\n\r\n    return (\r\n      <header>\r\n        {this.isLoggedIn() ? (\r\n          \"Hello user\"\r\n        ) : (\r\n          <a href={requestUrl}>Login with trello account</a>\r\n        )}\r\n      </header>\r\n    );\r\n  }\r\n\r\n  private renderContent() {\r\n    return (\r\n      <main>{this.isLoggedIn() ? <h2>Content...</h2> : \"Please, log in!\"}</main>\r\n    );\r\n  }\r\n\r\n  public componentDidMount() {\r\n    const newToken = this.getTokenFromUrl();\r\n    this.setToken(newToken);\r\n  }\r\n\r\n  public render() {\r\n    return (\r\n      <div>\r\n        {this.renderHeader()}\r\n        {this.renderContent()}\r\n        <a\r\n          href={`https://api.trello.com/1/members/me/boards?fields=name,url&key=${REACT_APP_API_KEY}&token=${this.state.token}`}\r\n        >\r\n          GET BOARDS\r\n        </a>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import * as React from 'react';\r\nimport * as ReactDOM from 'react-dom';\r\nimport { App } from './components/App/App';\r\n\r\nReactDOM.render(<App />, document.querySelector('#root'));"],"sourceRoot":""}